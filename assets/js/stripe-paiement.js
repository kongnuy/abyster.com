var stripe=Stripe('pk_live_D59m0gkbmuZ0w2I1xHqBpict');var elements=stripe.elements();var chemin="https://abyster-consulting.com/";var card=elements.create('card',{style:{base:{iconColor:'#666EE8',color:'#31325F',lineHeight:'40px',fontWeight:300,fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:'15px','::placeholder':{color:'#CFD7E0',},},}});card.mount('#card-element');function setOutcome(result){var successElement=document.querySelector('.success');var errorElement=document.querySelector('.error');var tokenElement=document.querySelector('.token');var form=document.querySelector('form');var name=form.querySelector('input[name=cardholder-name]').value;var mail=form.querySelector('input[name=cardholder-email]').value;var price=form.querySelector('input[name=cardholder-price]').value;var nbreplace=form.querySelector('input[name=cardholder-nbreplace]').value;var id=form.querySelector('input[name=cardholder-id]').value;var url=chemin+"paiement.php";var form_data=new FormData();successElement.classList.remove('visible');errorElement.classList.remove('visible');if(result.token){$('.token').css('display','block');var request=new XMLHttpRequest();request.open("POST",url,true);form_data.append('mail',mail);form_data.append('name',name);form_data.append('price',price);form_data.append('id',id);form_data.append('nbreplace',nbreplace);form_data.append('token',result.token.id);request.send(form_data);request.onload=function(oEvent){if(request.readyState==4){$('#loading').css('display','none');$('.token').css('display','none');successElement.classList.add('visible');$('.success').css('display','block');$('.error').css('display','none');}else{$('.token').css('display','none');$('#loading').css('display','none');$('.message').html("Paiement echouer");}};}else if(result.error){errorElement.textContent=result.error.message;$('#loading').css('display','none');errorElement.classList.add('visible');}}card.on('change',function(event){setOutcome(event);});document.querySelector('form').addEventListener('submit',function(e){e.preventDefault();var form=document.querySelector('form');$('#loading').css('display','block');var extraDetails={name:form.querySelector('input[name=cardholder-name]').value,mail:form.querySelector('input[name=cardholder-email]').value,price:form.querySelector('input[name=cardholder-price]').value,id:form.querySelector('input[name=cardholder-id]').value,nbreplace:form.querySelector('input[name=cardholder-nbreplace]').value};stripe.createToken(card,extraDetails).then(setOutcome);});